import{u as k,a as T,b as L,c as Q,Q as S,d as M,e as P,f as R,g as B}from"./map-store.44e36fb8.js";import{u as V,a as E}from"./Ripple.c4d5350b.js";import{B as h,f as b,w as y,s as $,C as q,d as F,D as A,r as m,o as D,E as I,b as i,G as p,H as d,I as g,x as c,J as N,A as _,c as z,K as H,F as j,l as G}from"./index.ed7554e6.js";import{h as J}from"./render.0697ae7e.js";import{u as K}from"./use-quasar.c664cc04.js";import{a as U,g as O}from"./axios.e1e667f7.js";var v=h({name:"QRouteTab",props:{...V,...k},emits:T,setup(t,{slots:o,emit:e}){const s=E({useDisableForRouterLinkProps:!1}),{renderTab:l,$tabs:r}=L(t,o,e,{exact:b(()=>t.exact),...s});return y(()=>`${t.name} | ${t.exact} | ${(s.resolvedLink.value||{}).href}`,()=>{r.verifyRouteModel()}),()=>l(s.linkTag.value,s.linkAttrs.value)}}),W=h({name:"QToolbar",props:{inset:Boolean},setup(t,{slots:o}){const e=b(()=>"q-toolbar row no-wrap items-center"+(t.inset===!0?" q-toolbar--inset":""));return()=>$("div",{class:e.value,role:"toolbar"},J(o.default))}});const X={style:{"min-height":"50px"},class:"my-responsive-div center-block"},Y={href:"/",style:{"margin-bottom":"0"}},Z=["src"],ee=F({__name:"MainLayout",setup(t){const o=A(),e=Q(),s=K(),l=m(o.name),r=m("/atlas/logo_atlas.png"),u=m(s.screen.width<=400),x=async()=>{const a=await O.get("/v2/geoapps");e.geoStories=a.data.geoapps},w=()=>{u.value=s.screen.width<=400};return D(()=>{window.addEventListener("resize",w),e.geoStories.length===0&&x(),e.localConfig||U.get("/atlas/localConfig.json").then(a=>{console.log("localConfig",a.data),e.localConfig=a.data,r.value=e.localConfig.publicPath+e.localConfig.logo_filename,console.log("logoPath",r.value)}).catch(a=>{console.error("Error getting localConfig",a),e.localConfig={publicPath:"/atlas/",logo_filename:"logo_atlas.png",estados_alternate:"geonode:estados_inegi",estados_style:"contorno_estados"}})}),y(()=>o.path,a=>{console.log("selectedTab",l.value),console.log("route.name",o.path),console.log("path",a)}),(a,f)=>{const C=I("router-view");return i(),p(S,{view:"lHh Lpr lFf",style:{"margin-top":"14px","margin-bottom":"-162px"}},{default:d(()=>[g("div",X,[c(W,null,{default:d(()=>[g("a",Y,[g("img",{src:r.value,height:"50",style:{"margin-left":"-12px"}},null,8,Z)]),c(M),g("div",{class:N({"q-gutter-y-md":u.value,"max-width-250":u.value,"more-width-250":!u.value})},[_(e).geoStories.length?(i(),p(P,{key:0,modelValue:l.value,"onUpdate:modelValue":f[0]||(f[0]=n=>l.value=n),style:{"margin-right":"-12px"},"no-caps":"","outside-arrows":"","active-color":"primary","indicator-color":"primary",class:"text-grey-10"},{default:d(()=>[c(v,{to:"/mapa",label:"Mapa",exact:""}),(i(!0),z(j,null,H(_(e).geoStories,n=>(i(),p(v,{key:n.pk,to:"/v/"+n.pk,exact:"",label:n.title},null,8,["to","label"]))),128))]),_:1},8,["modelValue"])):G("",!0)],2)]),_:1})]),c(R),c(B,null,{default:d(()=>[(i(),p(C,{key:_(o).path}))]),_:1})]),_:1})}}});var ne=q(ee,[["__scopeId","data-v-b542c92a"]]);export{ne as default};
